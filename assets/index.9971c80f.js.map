{"version":3,"file":"index.9971c80f.js","sources":["../../vite/modulepreload-polyfill","../../main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import './style.css';\nimport { Map, View } from 'ol';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport { Vector as VectorSource } from 'ol/source';\nimport { Fill, Style, Stroke, Text } from 'ol/style';\nimport { Vector as VectorLayer } from 'ol/layer';\nimport foodData from './hopeworld.min.json';\nimport iso_3166_1_alpha_2_codes from './hopeworld.min.json';\nimport name from './hopeworld.min.json';\n\nlet select = document.querySelector('select');\nlet textVisible = true;\nconst highestProdArray = {};\nconst foodArray = [];\nlet product;\nconst countryProductionList = [];\n\n\n\n\nconst vectorSource = new VectorSource({\n  features: new GeoJSON().readFeatures(foodData, name, iso_3166_1_alpha_2_codes, { dataProjection: \"EPSG:4326\", featureProjection: \"EPSG:3857\" }),\n  // eslint-disable-next-line no-dupe-keys\n  features: new GeoJSON().readFeatures(iso_3166_1_alpha_2_codes, { dataProjection: \"EPSG:4326\", featureProjection: \"EPSG:3857\" }),\n  // eslint-disable-next-line no-dupe-keys\n  features: new GeoJSON().readFeatures(name, { dataProjection: \"EPSG:4326\", featureProjection: \"EPSG:3857\" }),\n\n});\nfoodArray.push(['None']);\n\nObject.keys(foodData.features[0].properties).forEach(key => {\n  if (key.indexOf(\"project_hope\") > -1 && key !== 'project_hope_Area' && key !== 'project_hope_Unit' && key !== 'project_hope_Summe Ergebnis') {\n\n    const name = key.split('project_hope_')[1];\n    const foodReadableName = key;\n    foodArray.push([name, foodReadableName])\n\n  }\n});\n\n\n\nfoodData.features.forEach((feature) => {\n  Object.keys(feature.properties).forEach(key => {\n    if (key.indexOf(\"project_hope\") > -1 && key !== 'project_hope_Area' && key !== 'project_hope_Unit' && key !== 'project_hope_Summe Ergebnis') {\n      const foodRealName = key;\n\n      if (feature.properties[key] > highestProdArray[foodRealName] || highestProdArray[foodRealName] == undefined) {\n\n        highestProdArray[foodRealName] = feature.properties[key]\n\n      }\n    }\n  });\n});\n\n\ndocument.getElementById(\"foodSelectField\").onchange = function (event) {\n  product = undefined;\n  const value = event.target.value\n  product = value\n  vectorSource.changed(); \n  foodData.features.forEach((feature) => {\n    Object.keys(feature.properties).forEach(key => {\n      if (key.indexOf(\"project_hope_Area\") > -1) {\n        if (feature.properties[key] !== null && feature.properties[product] !== null && feature.properties[product] !== 0) {      \n          countryProductionList.push([feature.properties[key], feature.properties[product]])\n        }\n      }\n    });\n  });\n  \n  for (let i = 0; i < countryProductionList.length; i++) {\n    const mockTableBody = document.getElementById('mockTableBody')\n    const newTr = document.createElement('tr');\n    const newTd = document.createElement('td');\n    const secondTd = document.createElement('td');\n    newTd.appendChild(document.createTextNode(countryProductionList[i][0]));\n    secondTd.appendChild(document.createTextNode(countryProductionList[i][1]));\n    newTr.appendChild(newTd);\n    newTr.appendChild(secondTd);\n    mockTableBody.appendChild(newTr);\n  }\n}\n\nfoodArray.map(singleArray => select[singleArray] = select.add(new Option(singleArray[0], singleArray[1])))\n\ndocument.getElementById(\"NumbersButton\").onclick = function () {\n  if (textVisible == true) {\n    textVisible = false\n  }\n  else if (textVisible == false) {\n    textVisible = true\n  }\n  vectorSource.changed();\n}\n\nfunction getTextStyle() {\n  return (\n    new Text({\n      font: '13px Calibri,sans-serif',\n      fill: new Fill({\n        color: '#000',\n      }),\n      stroke: new Stroke({\n        color: '#fff',\n        width: 4,\n      }),\n    })\n  );\n}\n\nfunction getProductStyle(fillColor, labelVisible) {\n  return (\n    new Style({\n      text: labelVisible ? getTextStyle() : null,\n      fill: new Fill({\n        color: fillColor,\n      }),\n      stroke: new Stroke({\n        color: 'Black',\n        width: 1.5\n      })\n    })\n  );\n}\n\n\n//styling\nconst myStyleFunction = function (feature) {  \n  let style;\n  const highestValue = highestProdArray[product]\n  if (product === undefined || product === null) {\n    style = getProductStyle('Grey', false)\n  } else if (feature.get(product) == null || feature.get(product) == 0) {\n    style = getProductStyle('Grey', null)\n  } else if (feature.get(product) < highestValue / 85) {\n    style = getProductStyle('rgba(239,243,255,1)', textVisible);\n  } else if (feature.get(product) < highestValue / 60) {\n    style = getProductStyle('rgba(189,215,231,1)', textVisible)\n  } else if (feature.get(product) < highestValue / 40) {\n    style = getProductStyle('rgba(107,174,214,1)', textVisible);\n  } else if (feature.get(product) < highestValue / 20) {\n    style = getProductStyle('rgba(49,130,189,1)', textVisible)\n  } else if (feature.get(product) > highestValue / 20) {\n    style = getProductStyle('rgba(8,81,156,1)', textVisible)\n  } else {\n    style = getProductStyle('Grey', false)\n  }\n\n  const textStyle = style.getText();\n  if (textStyle !== null) {\n    textStyle.setText(\n      feature.get(product) + \" \" + feature.get('project_hope_Unit')\n    );\n\n  }\n\n\n  return style;\n}\n\nconst vectorLayer = new VectorLayer({\n  style: myStyleFunction,\n  source: vectorSource,\n});\n\nconst map = new Map({\n  layers: [vectorLayer],\n  target: 'map',\n  view: new View({\n    center: [0, 3000000],\n    zoom: 2,\n  }),\n})\n\ndocument.getElementById(\"dismiss-popup-btn2\").addEventListener(\"click\", function () {\n  document.getElementsByClassName(\"secondPopUp\")[0].classList.remove(\"active\");\n});\n\ndocument.getElementById(\"help\").addEventListener(\"click\", function () {\n  document.getElementsByClassName(\"popup\")[0].classList.add(\"active\");\n});\n\ndocument.getElementById(\"dismiss-popup-btn\").addEventListener(\"click\", function () {\n  document.getElementsByClassName(\"popup\")[0].classList.remove(\"active\");\n});\n\n  document.getElementById(\"contactB\").addEventListener(\"click\", function () {\n    document.getElementsByClassName(\"secondPopUp\")[0].classList.add(\"active\");\n  });\n\ndocument.getElementById(\"listButton\").addEventListener(\"click\", function () {\n  document.getElementsByClassName(\"listPopUp\")[0].classList.add(\"active\");\n});\n\ndocument.getElementById(\"dismiss-List\").addEventListener(\"click\", function () {\n  document.getElementsByClassName(\"listPopUp\")[0].classList.remove(\"active\");\n});"],"names":["name","iso_3166_1_alpha_2_codes"],"mappings":"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"}